{% extends 'layout.html' %}

{% block title %}Manjunath Anand - Handwritten Digit Identifier{% endblock %}

{% block preendbody %}
<script type="text/javascript">
  var form = document.getElementById("digit-form");
  var submitButton = document.getElementById("btn-submit")
  var file = document.getElementById("file");
  file.onchange = function () {
    if (file.files.length > 0) {
      // Change submit button to show loading indicator
      submitButton.className += " is-loading";

      document.getElementById('filename').innerHTML = file.files[0].name;

      form.submit();
    }
  };
</script>
{% endblock %}

{% block content %}
<form id="digit-form" method="post" action="./process_form" enctype="multipart/form-data">
  <div class="columns">
    <div class="column is-half is-offset-one-quarter">
      <div class="notification">
        Welcome to our digit identifier! Upload an image of a handwritten digit, and we will attempt
        to predict what number it represents.
      </div>

      <div class="field">
        <div class="file is-centered is-boxed has-name">
          <label class="file-label">
            <input class="file-input" id="file" type="file" name="image">
            <span class="file-cta">
              <span class="file-icon">
                <i class="fas fa-upload"></i>
              </span>
              <span class="file-label">
                Upload Image
              </span>
            </span>
            <span class="file-name" id="filename">
              Choose image...
            </span>
          </label>
        </div>
      </div>

      <div class="buttons is-centered">
        <div class="field is-grouped">
          <div class="control">
            <button id="btn-submit" type="submit" class="button is-link">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
{% endblock %}
